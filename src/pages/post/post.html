<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Post</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <div class="item-post">
    <ion-item class="no-border">
      <ion-avatar item-left (click)="viewUser(post.user_id)">
        <img src="{{ post.face }}">
      </ion-avatar>
      <h2 (click)="viewUser(post.user_id)">{{ post.name }}</h2>
      <p>{{ post.time }}</p>
      <ion-icon name="md-more" item-right color="gray" class="pull-right" (click)="showActions()"></ion-icon>
    </ion-item>
    <ion-item text-wrap no-padding class="post-body no-border">
      <div (click)="viewPost(post.id)">
        <img class="full-image" *ngIf="post.image" src="{{ post.image }}">
        <p>{{ post.content }}</p>
      </div>

      <div class="actions">
          <span (click)="toggleLike(post)">
            <ion-icon name="ios-heart" color="danger" [hidden]="!post.liked"></ion-icon>
            <ion-icon name="ios-heart-outline" color="danger" [hidden]="post.liked"></ion-icon>
            <span ion-text color="gray">{{ post.likeCount}}</span>
          </span>
        <span margin-left (click)="viewPost(post.id)">
            <ion-icon name="ios-text-outline" color="primary"></ion-icon>
            <span ion-text color="gray">{{ post.commentCount}}</span>
          </span>
      </div>
    </ion-item>

    <ion-list no-margin>
      <ion-item class="post-comment" *ngFor="let comment of post.comments">
        <ion-avatar item-left (click)="viewUser(comment.user_id)">
          <img src="{{ comment.face }}">
        </ion-avatar>
        <div>
          <span ion-text color="primary">{{ comment.name }}</span>
          <span class="pull-right text-sm" color="gray" padding-right>{{ comment.time }}</span>
        </div>
        <p text-wrap>{{ comment.content}}</p>
        <a class="subdued like-count">
          <ion-icon name="ios-heart" color="danger" [hidden]="!comment.liked"></ion-icon>
          <ion-icon name="ios-heart-outline" color="danger" [hidden]="comment.liked"></ion-icon>
          <span ion-text color="gray">{{ comment.likeCount}}</span>
        </a>
      </ion-item>
    </ion-list>
  </div>
</ion-content>

<ion-footer>

  <ion-toolbar class="no-border">

    <ion-buttons start>
      <button ion-button>
        <ion-icon name="camera" color="dark"></ion-icon>
      </button>
    </ion-buttons>

    <ion-input [(ngModel)]="comment" placeholder="Write a comment"></ion-input>

    <ion-buttons end>
      <button ion-button (click)="postComment()">
        <ion-icon name="send" color="primary"></ion-icon>
      </button>
    </ion-buttons>

  </ion-toolbar>

</ion-footer>
