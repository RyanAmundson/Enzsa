<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>User</ion-title>
    <ion-buttons end>
      <button ion-button>
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>
  <div text-center class="user-profile" [ngStyle]="{'background-image': 'url(' + user.cover + ')'}">
    <div class="bg-dark">
      <ion-grid>
        <ion-row class="middle-align">
          <ion-col>
            <button ion-button color="light" class="action">
              <ion-icon name="add"></ion-icon>
            </button>
          </ion-col>
          <ion-col>
            <img class="profile-picture" src="{{ user.face}}">
          </ion-col>
          <ion-col>
            <button ion-button color="light" class="action">
              <ion-icon name="text"></ion-icon>
            </button>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            <h4 ion-text color="light">{{ user.name }}</h4>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            <span class="number">{{ user.followers }}</span>
            <span class="desc">Followers</span>
          </ion-col>
          <ion-col>
            <span class="number">{{ user.following }}</span>
            <span class="desc">Following</span>
          </ion-col>
          <ion-col>
            <span class="number">{{ user.favorites }}</span>
            <span class="desc">Favorites</span>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>

  <div class="posts">
    <div class="item-post border-bottom" *ngFor="let post of user.posts">
      <ion-item class="no-border" text-wrap>
        <ion-avatar item-left (click)="viewUser(post.user_id)">
          <img src="{{ post.face }}">
        </ion-avatar>
        <h2 (click)="viewUser(post.user_id)">{{ post.name }}</h2>
        <p>{{ post.time }}</p>
        <ion-icon name="md-more" item-right color="gray" class="pull-right" (click)="showActions()"></ion-icon>
        <div>
          <div>
            <p (click)="viewPost(post.id)">{{ post.content }}</p>
            <img class="full-image" *ngIf="post.image" src="{{ post.image }}" (click)="viewPost(post.id)">
          </div>

          <div class="actions">
            <span (click)="toggleLike(post)">
              <ion-icon name="ios-heart" color="danger" [hidden]="!post.liked"></ion-icon>
              <ion-icon name="ios-heart-outline" color="danger" [hidden]="post.liked"></ion-icon>
              <span ion-text color="gray">{{ post.likeCount}}</span>
            </span>
              <span margin-left (click)="viewPost(post.id)">
              <ion-icon name="ios-text-outline" color="primary"></ion-icon>
              <span ion-text color="gray">{{ post.commentCount}}</span>
            </span>
          </div>
        </div>
      </ion-item>
    </div>
  </div>
</ion-content>
